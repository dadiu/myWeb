(function($){$.fn.downMenu=function(options){var defaults={"logo":'<i class="iconfont">&#xe60b;</i>个吴海晶',"href":"index.html","status":"show","target":"_self","id":"","className":"","nav":[],"dd":"","ddType":"1","width":"100%","height":"auto","p":"","callback":null},options=$.extend(defaults,options),objs={navParent:$("<div>").addClass("nav"),navChild:$("<div>").addClass("menu"),wrapChild:$("<div>").addClass("wrap"),dl:$("<dl>"),btn:$("<b>").addClass("iconfont")};dfunc.set=this;dfunc.init(options,objs);if(options.callback){options.callback(options.p)}};var dfunc={set:"",urlObj:{},init:function(options,objs){var _t=this,DOMP='<div class="wrap"><ul class="cb">',DOMC="",dd="",i=0,len=options.nav.length;if(options.nav.length>0){for(;i<len;i++){DOMP+='<li data-nav="'+options.nav[i].name+'">'+'<a href="'+options.nav[i].href+"?nav="+options.nav[i].name+'">'+options.nav[i].china+"</a></li>"}DOMP+="</ul>"+'<a class="nav_cp" href="'+options.href+'">'+"<span>"+options.logo+"</span>"+"</a></div>";objs.navParent.append(DOMP);$(dfunc.set).append(objs.navParent);_t.evenP(options,objs)}if(typeof options.dd=="object"){if(options.ddType=="1"){$.each(options.dd,function(i,key){DOMC+="<dt>"+i+"</dt>";dd="";$.each(key,function(name,href){href.length=="0"?href="javascript:;":href=href;dd+='<a href="'+href+'" target="'+options.target+'">'+name+"</a>"});DOMC+="<dd>"+dd+"</dd>"})}else{if(options.ddType=="0"){$.each(options.dd,function(name,href){href.length=="0"?href="javascript:;":href=href;dd+='<a href="'+href+'" target="'+options.target+'">'+name+"</a>"});DOMC+="<dd>"+dd+"</dd>";objs.dl.addClass("pl10")}}objs.dl.append(DOMC);objs.wrapChild.append(objs.dl);objs.wrapChild.append(objs.btn);objs.navChild.append(objs.wrapChild);if(options.status=="hide"){objs.btn.addClass("fa-angle-down").html("&#xe606;");objs.dl.hide()}else{objs.btn.addClass("fa-angle-up").html("&#xe603;");objs.dl.show()}if(options.id){$(dfunc.set).attr("id",options.id)}if(options.className){$(dfunc.set).addClass(options.className)}$(dfunc.set).append(objs.navChild);objs.navChild.find("a:eq(0)").addClass("crt");_t.evenC(options,objs)}},evenP:function(options,objs){var _t=this;_t.urlFun();if(_t.urlObj.nav){$('.nav li[data-nav="'+_t.urlObj.nav+'"]').addClass("crt").siblings().removeClass("crt")}else{$('.nav li[data-nav="home"]').addClass("crt").siblings().removeClass("crt")}$(dfunc.set).on("click",".nav",function(){if($(window).width()<480){$(".nav ul").slideToggle()}else{$(".nav ul").show()}});$(window).on("resize",function(){if($(window).width()<480){$(".nav ul").hide()}else{$(".nav ul").show()}})},evenC:function(options,objs){objs.navChild.delegate("a","click",function(){$(dfunc.set).find("a").removeClass("crt");$(this).addClass("crt")});objs.navChild.delegate(".fa-angle-down","click",function(){objs.btn.addClass("fa-angle-up").removeClass("fa-angle-down").html("&#xe603;");objs.dl.slideDown()});objs.navChild.delegate(".fa-angle-up","click",function(){objs.btn.addClass("fa-angle-down").removeClass("fa-angle-up").html("&#xe606;");objs.dl.slideUp()})},urlFun:function(){var _t=this,href=window.location.search;if(href.indexOf("?")!=-1){var hrefArr=href.substr(1).split("&"),hrefLen=hrefArr.length;for(var i=0;i<hrefLen;i++){_t.urlObj[hrefArr[i].split("=")[0]]=hrefArr[i].split("=")[1]}}return false}}})(jQuery);