(function(a){a.fn.tabs=function(d){var e={txt:"提示文字",list:"",maxNum:10,searchImg:"http://whj.fayfox.com/img/ic_search.png"},d=a.extend(e,d),f={selA:a("<div>").addClass("u_sel_a"),selATxt:a("<label>").addClass("u_sel_aTxt").html(d.txt),selB:a("<div>").addClass("u_sel_b"),selBTab:a("<div>").addClass("u_sel_bTab"),selBMenu:a("<ul>").addClass("u_sel_bMenu"),selBSearch:a("<div>").addClass("u_sel_bSearch").append('<input type="text"/><img src="'+d.searchImg+'"/>'),selBSearchTips:a("<div>").addClass("u_sel_bSearchTips"),selBList:a("<ul>").addClass("u_sel_bList"),rememberInp:a('<input type="hidden" data-tip="#J_changeAreaTip" name="areaId">'),prevBtn:a("<a>").addClass("u_areaTabPrev").attr("href","javascript:;").html("&lt;"),nextBtn:a("<a>").addClass("u_areaTabNext").attr("href","javascript:;").html("&gt;")},c=this,b={init:function(g,i){var h=this;h.V.getDoms(g,i);h.M.even(g,i)},V:{getDoms:function(g,i){var h=this;i.selA.append(i.selATxt);i.selA.append('<i class="ic_down"></i>');i.selB.append(i.selBTab);i.selB.append(i.selBSearchTips);i.selB.append(i.selBList);i.selBList.append(h.domArea(g,i));i.selBMenu.append(b.M.tabCount(b.M.allLen,g));i.selBTab.append(i.prevBtn);i.selBTab.append(i.selBMenu);i.selBTab.append(i.nextBtn);i.selBTab.append(i.selBSearch);c.css("position","relative");c.append(i.selA);c.append(i.selB);c.append(i.rememberInp);c.addClass("u_sel u_areaTab")},domArea:function(k,p){var o="",n=b.M.resetList(k.list),m=n[0].length,h=n[1].length,l=0,g=0;for(;l<m;l++){if(n[0][l]){o+='<li data-val="'+n[0][l]["val"]+'" data-other="0">'+n[0][l]["name"]+"</li>";b.M.allLen++}}for(;g<h;g++){if(n[1][g]){o+='<li data-val="'+n[1][g]["val"]+'" data-other="1">'+n[1][g]["name"]+"</li>";b.M.otherLen++}}return o}},M:{allLen:0,otherLen:0,even:function(h,j){var i=this,g="";j.selA.click(function(){if(!a(this).attr("data-boo")){j.selBList.find("li").hide();j.selBTab.find("li:eq(0)").addClass("crt").css("border-left","0");j.selBList.find("li:lt("+h.maxNum+")").show();a(this).attr("data-boo",1)}c.css("z-index","99");j.selB.slideDown(100);return false});j.selBList.find("li").click(function(){var l=a(this).text(),k=a(this).attr("data-val");j.selATxt.text(l);j.rememberInp.val(k).attr("data-Name",l)});if(j.selBMenu.find("li").length>=6){j.selBSearch.addClass("u_sel_bSearchHide");j.selBSearch.click(function(){j.selBSearch.removeClass("u_sel_bSearchHide");i.setCursorPosition(j.selBSearch.find("input").get(0),j.selBSearch.find("input").val().length);j.selBTab.addClass("u_sel_bTabHide");j.nextBtn.addClass("u_areaTabNextMove")});j.selBMenu.find("li").mouseenter(function(){j.selBSearch.addClass("u_sel_bSearchHide");j.selBTab.removeClass("u_sel_bTabHide");j.nextBtn.removeClass("u_areaTabNextMove")});j.selBTab.addClass("u_sel_bTabMore");j.nextBtn.click(function(){j.selBMenu.find("li:gt(5)").show();j.selBMenu.find("li:lt(5)").hide();return false});j.prevBtn.click(function(){j.selBMenu.find("li:lt(5)").show();j.selBMenu.find("li:gt(5)").hide();return false})}j.selBSearch.click(function(){g=j.selBSearch.find("input").val();i.searchFun(j,g,"请输入你要搜索的大区");return false});j.selBSearch.find("input").keyup(function(){g=a(this).val();i.searchFun(j,g,"你搜索的大区不存在");return false});j.selBMenu.find("li").mouseenter(function(){var k=a(this).text(),m=0,l=0;j.selBSearchTips.hide();a(this).addClass("crt").siblings().removeClass("crt");j.selBSearch.find("input").val("");if(k=="其他"){j.selBList.find('li[data-other="0"]').hide();j.selBList.find('li[data-other="1"]').show()}else{m=a(this).text().split("-")[0]-2,l=a(this).text().split("-")[1];j.selBList.find("li").hide();if(m<0){j.selBList.find('li[data-other="0"]:lt('+l+")").show()}else{j.selBList.find('li[data-other="0"]:lt('+l+"):gt("+m+")").show()}}});j.selBTab.find("li").click(function(){return false});a("body").click(function(){c.css("z-index","1");j.selB.hide()})},searchFun:function(k,h,g){var j=0;k.selBTab.find("li").removeClass("crt");k.selBList.find("li").each(function(){if(a(this).text().indexOf(h)>-1){a(this).show();j++}else{a(this).hide()}});if(j<1){k.selBSearchTips.show().html(g)}else{k.selBSearchTips.hide()}},resetList:function(j){var i=this,g={0:[],1:[]},h=0,k="";a.each(j,function(l,m){m.val=l;h=m.name.split(" ")[0];if(/^[1-9]\d*$/.test(h)){g[0][h]=this}else{g[1].push(this)}});return g},tabCount:function(g,h){var k=this,m=Math.ceil(g/h.maxNum),j=0,l="";for(;j<m;j++){l+="<li>"+(j*15+1)+"-"+(j+1)*15+"</li>"}if(k.otherLen>0){l+="<li>其他</li>"}return l},setCursorPosition:function(h,i){if(h.setSelectionRange){h.focus();h.setSelectionRange(i,i)}else{if(h.createTextRange){var g=h.createTextRange();g.collapse(true);g.moveEnd("character",i);g.moveStart("character",i);g.select()}}}}};b.init(d,f)}})(jQuery);
/**
 * Created by Administrator on 2015/9/11.
 * @version V1.1.1 -  优化搜索条件
 */
